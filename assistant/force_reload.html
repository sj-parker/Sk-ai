<!DOCTYPE html>
<html>
<head>
    <title>Force Reload Test</title>
</head>
<body>
    <h1>Force Reload Test</h1>
    <div id="status"></div>
    <div id="images"></div>
    
    <script>
        const status = document.getElementById('status');
        const images = document.getElementById('images');
        
        function addStatus(msg) {
            status.innerHTML += '<div>' + msg + '</div>';
        }
        
        function testImage(name, url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    addStatus(`✅ ${name}: ${url} - загружен`);
                    images.innerHTML += `<img src="${url}" alt="${name}" style="width: 100px; height: 100px; margin: 10px;">`;
                    resolve(true);
                };
                img.onerror = () => {
                    addStatus(`❌ ${name}: ${url} - ошибка загрузки`);
                    resolve(false);
                };
                img.src = url;
            });
        }
        
        async function testAll() {
            addStatus('Начинаем тест загрузки изображений...');
            
            const testImages = [
                ['idle', '/static/idle.png'],
                ['talking', '/static/talking.png'],
                ['waiting', '/static/waiting.png']
            ];
            
            for (const [name, url] of testImages) {
                await testImage(name, url);
            }
            
            addStatus('Тест завершен!');
        }
        
        testAll();
    </script>
</body>
</html> 