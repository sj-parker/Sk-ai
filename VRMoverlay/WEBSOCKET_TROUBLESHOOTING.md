# üîå –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üö® –ü—Ä–æ–±–ª–µ–º–∞: WebSocket –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ overlay

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç WebSocket:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîå –¢–µ—Å—Ç WebSocket" –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
   - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `websocket-test.html` –Ω–∞–ø—Ä—è–º—É—é

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ WebSocket —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 31992

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - IP –∞–¥—Ä–µ—Å: `192.168.1.4` (–∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à)
   - –ü–æ—Ä—Ç: `31992`
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `ws://`

## üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω
# –í –∫–æ–Ω—Å–æ–ª–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "WebSocket —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ ws://192.168.1.4:31992"
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
telnet 192.168.1.4 31992

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ netcat
nc -zv 192.168.1.4 31992
```

### –®–∞–≥ 3: –¢–µ—Å—Ç WebSocket
1. –û—Ç–∫—Ä–æ–π—Ç–µ `websocket-test.html`
2. –í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∏ –ø–æ—Ä—Ç
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ WebSocket
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Network –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üõ†Ô∏è –†–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "WebSocket connection failed"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–æ–º
- –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

**–†–µ—à–µ–Ω–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
3. –û—Ç–∫–ª—é—á–∏—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 31992 —Å–≤–æ–±–æ–¥–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: "Connection closed unexpectedly"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –¢–∞–π–º–∞—É—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–∏
2. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "WebSocket –Ω–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∏–∫–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏—è:**
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É overlay
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –í overlay:
- –°—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- –ó–µ–ª–µ–Ω—ã–π: –ø–æ–¥–∫–ª—é—á–µ–Ω
- –ö—Ä–∞—Å–Ω—ã–π: –æ—Ç–∫–ª—é—á–µ–Ω
- –ñ–µ–ª—Ç—ã–π: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```
‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
üèì –û—Ç–ø—Ä–∞–≤–ª–µ–Ω ping –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
üèì –ü–æ–ª—É—á–µ–Ω pong, –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞: 15ms
```

### –í –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–µ:
```
WebSocket –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω: vrm_overlay
–ü–æ–ª—É—á–µ–Ω ping –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω pong –∫–ª–∏–µ–Ω—Ç—É
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ WebSocket

### –í VRM overlay (`vrm-websocket.js`):
```javascript
this.wsHost = '192.168.1.4'; // –í–∞—à IP
this.wsPort = 31992;         // –ü–æ—Ä—Ç WebSocket
this.maxReconnectAttempts = 5;
this.reconnectDelay = 2000;
```

### –í –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–µ (`web_server.py`):
```python
WS_HOST = '192.168.1.4'
WS_PORT = 31992
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
1. **Ping/Pong** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. **–≠–º–æ—Ü–∏–∏** - —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–º–æ—Ü–∏–π
3. **–ê–Ω–∏–º–∞—Ü–∏–∏** - —Ç–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–π

### –†—É—á–Ω—ã–µ —Ç–µ—Å—Ç—ã:
1. –û—Ç–ø—Ä–∞–≤–∫–∞ ping –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏

## üìù –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
localStorage.setItem('debug_websocket', 'true');
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
   - üîå WebSocket
   - ‚úÖ –£—Å–ø–µ—Ö
   - ‚ùå –û—à–∏–±–∫–∞
   - ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   - üîÑ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:
1. –£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª ping –¥–æ 60 —Å–µ–∫—É–Ω–¥
2. –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É

### –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É ping
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (Ctrl+C)
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
   python main.py
   ```

2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:**
   - Ctrl+Shift+R (–∂–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
   - –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª:**
   ```bash
   # Windows
   netsh advfirewall firewall add rule name="VRM Assistant" dir=in action=allow protocol=TCP localport=31992

   # Linux
   sudo ufw allow 31992
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ localhost –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```javascript
   this.wsHost = 'localhost'; // –í–º–µ—Å—Ç–æ IP
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
3. –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –û–°
4. –û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã 