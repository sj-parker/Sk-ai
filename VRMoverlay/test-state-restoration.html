<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #ffd700;
        }
        
        .status {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .section h3 {
            margin-top: 0;
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è</h1>
        
        <div class="section">
            <h3>üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º</h3>
            <div class="grid-2">
                <button class="btn btn-success" onclick="saveCurrentState()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
                <button class="btn" onclick="restoreState()">üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
                <button class="btn btn-danger" onclick="clearState()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
                <button class="btn" onclick="showState()">üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
            </div>
        </div>
        
        <div class="section">
            <h3>üé≠ –¢–µ—Å—Ç–æ–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏</h3>
            <div class="grid-2">
                <button class="btn" onclick="testAnimation('idle')">üòê Idle</button>
                <button class="btn" onclick="testAnimation('talking')">üí¨ Talking</button>
                <button class="btn" onclick="testAnimation('thinking_move')">ü§î Thinking</button>
                <button class="btn" onclick="testAnimation('greeting')">üëã Greeting</button>
            </div>
        </div>
        
        <div class="section">
            <h3>üòä –¢–µ—Å—Ç–æ–≤—ã–µ —ç–º–æ—Ü–∏–∏</h3>
            <div class="grid-2">
                <button class="btn" onclick="testEmotion('happy')">üòä Happy</button>
                <button class="btn" onclick="testEmotion('sad')">üò¢ Sad</button>
                <button class="btn" onclick="testEmotion('angry')">üò† Angry</button>
                <button class="btn" onclick="testEmotion('surprised')">üò≤ Surprised</button>
            </div>
        </div>
        
        <div class="status" id="log">
            –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è...
        </div>
    </div>

    <script>
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        function saveCurrentState() {
            if (window.app && window.app.saveState) {
                window.app.saveState();
                log('üíæ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è saveState –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
            }
        }
        
        function restoreState() {
            if (window.app && window.app.restoreLastState) {
                window.app.restoreLastState();
                log('üîÑ –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è restoreLastState –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
            }
        }
        
        function clearState() {
            try {
                localStorage.removeItem('vrm_overlay_state');
                log('üóëÔ∏è –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–∏—â–µ–Ω–æ –∏–∑ localStorage');
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${error.message}`);
            }
        }
        
        function showState() {
            try {
                const state = localStorage.getItem('vrm_overlay_state');
                if (state) {
                    const parsedState = JSON.parse(state);
                    log('üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:');
                    log(JSON.stringify(parsedState, null, 2));
                } else {
                    log('üìã –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ localStorage');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${error.message}`);
            }
        }
        
        function testAnimation(animationName) {
            if (window.app && window.app.playMovement) {
                window.app.playMovement(animationName);
                log(`üé≠ –¢–µ—Å—Ç–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: ${animationName}`);
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è playMovement –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
            }
        }
        
        function testEmotion(emotionName) {
            if (window.app && window.app.applyEmotion) {
                window.app.applyEmotion(emotionName);
                log(`üòä –¢–µ—Å—Ç–æ–≤–∞—è —ç–º–æ—Ü–∏—è: ${emotionName}`);
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è applyEmotion –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            log('üìã –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è...');
            showState();
        });
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        setInterval(() => {
            if (window.app) {
                if (!window.app.saveState) {
                    log('‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è saveState –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
                }
                if (!window.app.restoreLastState) {
                    log('‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è restoreLastState –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
                }
            } else {
                log('‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
            }
        }, 2000);
    </script>
</body>
</html> 