<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VRM Performance Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .test-section h3 {
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }

        .result.good {
            border-left: 4px solid #28a745;
        }

        .result.warning {
            border-left: 4px solid #ffc107;
        }

        .result.bad {
            border-left: 4px solid #dc3545;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .recommendation {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid #28a745;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .recommendation h4 {
            margin: 0 0 10px 0;
            color: #28a745;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.3s ease;
        }

        .progress-fill.warning {
            background: linear-gradient(90deg, #ffc107, #fd7e14);
        }

        .progress-fill.bad {
            background: linear-gradient(90deg, #dc3545, #e83e8c);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ VRM</h1>

        <div class="test-section">
            <h3>üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div id="systemInfo" class="result">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ...
            </div>
        </div>

        <div class="test-section">
            <h3>üéÆ GPU —Ç–µ—Å—Ç</h3>
            <div id="gpuTest" class="result">
                –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GPU...
            </div>
            <div class="progress-bar">
                <div id="gpuProgress" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div class="test-section">
            <h3>üñ•Ô∏è CPU —Ç–µ—Å—Ç</h3>
            <div id="cpuTest" class="result">
                –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CPU...
            </div>
            <div class="progress-bar">
                <div id="cpuProgress" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div class="test-section">
            <h3>üíæ RAM —Ç–µ—Å—Ç</h3>
            <div id="ramTest" class="result">
                –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAM...
            </div>
            <div class="progress-bar">
                <div id="ramProgress" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div class="test-section">
            <h3>üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–∂–∏–º</h3>
            <div id="recommendation" class="recommendation">
                <h4>‚è≥ –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã...</h4>
                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button class="btn" onclick="runFullTest()">üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
            <button class="btn" onclick="openPerformancePanel()">‚öôÔ∏è –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
    </div>

    <script>
        let testResults = {
            gpu: { score: 0, info: '' },
            cpu: { score: 0, info: '' },
            ram: { score: 0, info: '' }
        };

        // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                runSystemInfo();
                runGPUTest();
                runCPUTest();
                runRAMTest();
            }, 500);
        });

        function runSystemInfo() {
            const info = [];
            
            // User Agent
            info.push(`–ë—Ä–∞—É–∑–µ—Ä: ${navigator.userAgent.split(' ').slice(-2).join(' ')}`);
            
            // Platform
            info.push(`–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${navigator.platform}`);
            
            // Language
            info.push(`–Ø–∑—ã–∫: ${navigator.language}`);
            
            // Online status
            info.push(`–û–Ω–ª–∞–π–Ω: ${navigator.onLine ? '–î–∞' : '–ù–µ—Ç'}`);
            
            // Connection
            if (navigator.connection) {
                info.push(`–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: ${navigator.connection.effectiveType || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);
            }
            
            document.getElementById('systemInfo').innerHTML = info.join('<br>');
        }

        function runGPUTest() {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            
            if (!gl) {
                document.getElementById('gpuTest').innerHTML = '‚ùå WebGL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è';
                document.getElementById('gpuProgress').className = 'progress-fill bad';
                document.getElementById('gpuProgress').style.width = '10%';
                testResults.gpu = { score: 0, info: 'WebGL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è' };
                return;
            }

            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            let gpuInfo = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è GPU';
            let score = 50;

            if (debugInfo) {
                const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                const vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
                gpuInfo = renderer;
                
                // –û—Ü–µ–Ω–∫–∞ GPU
                if (renderer.includes('Intel') || renderer.includes('HD Graphics')) {
                    score = 20;
                } else if (renderer.includes('GTX') || renderer.includes('RTX')) {
                    score = 90;
                } else if (renderer.includes('AMD') || renderer.includes('Radeon')) {
                    score = 80;
                } else if (renderer.includes('NVIDIA')) {
                    score = 85;
                }
            }

            // –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ GPU
            const startTime = performance.now();
            const testSize = 1024;
            canvas.width = testSize;
            canvas.height = testSize;
            
            // –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
            for (let i = 0; i < 100; i++) {
                gl.clear(gl.COLOR_BUFFER_BIT);
            }
            
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            
            if (renderTime < 10) score += 20;
            else if (renderTime < 50) score += 10;
            else score -= 10;

            score = Math.max(0, Math.min(100, score));

            const progressBar = document.getElementById('gpuProgress');
            progressBar.style.width = score + '%';
            
            if (score >= 70) {
                progressBar.className = 'progress-fill';
                document.getElementById('gpuTest').innerHTML = `‚úÖ ${gpuInfo}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else if (score >= 40) {
                progressBar.className = 'progress-fill warning';
                document.getElementById('gpuTest').innerHTML = `‚ö†Ô∏è ${gpuInfo}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else {
                progressBar.className = 'progress-fill bad';
                document.getElementById('gpuTest').innerHTML = `‚ùå ${gpuInfo}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            }

            testResults.gpu = { score, info: gpuInfo };
            updateRecommendation();
        }

        function runCPUTest() {
            let score = 50;
            let info = '';

            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä
            if (navigator.hardwareConcurrency) {
                const cores = navigator.hardwareConcurrency;
                info = `${cores} —è–¥–µ—Ä`;
                
                if (cores >= 8) score = 90;
                else if (cores >= 4) score = 70;
                else if (cores >= 2) score = 50;
                else score = 20;
            } else {
                info = '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }

            // –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç CPU
            const startTime = performance.now();
            let sum = 0;
            for (let i = 0; i < 1000000; i++) {
                sum += Math.sqrt(i);
            }
            const endTime = performance.now();
            const computeTime = endTime - startTime;
            
            if (computeTime < 10) score += 20;
            else if (computeTime < 50) score += 10;
            else score -= 10;

            score = Math.max(0, Math.min(100, score));

            const progressBar = document.getElementById('cpuProgress');
            progressBar.style.width = score + '%';
            
            if (score >= 70) {
                progressBar.className = 'progress-fill';
                document.getElementById('cpuTest').innerHTML = `‚úÖ ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else if (score >= 40) {
                progressBar.className = 'progress-fill warning';
                document.getElementById('cpuTest').innerHTML = `‚ö†Ô∏è ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else {
                progressBar.className = 'progress-fill bad';
                document.getElementById('cpuTest').innerHTML = `‚ùå ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            }

            testResults.cpu = { score, info };
            updateRecommendation();
        }

        function runRAMTest() {
            let score = 50;
            let info = '';

            // –î–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å
            if (navigator.deviceMemory) {
                const memory = navigator.deviceMemory;
                info = `${memory} GB RAM`;
                
                if (memory >= 16) score = 90;
                else if (memory >= 8) score = 70;
                else if (memory >= 4) score = 50;
                else score = 20;
            } else {
                info = '–û–±—ä–µ–º RAM –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω';
            }

            // –¢–µ—Å—Ç –ø–∞–º—è—Ç–∏
            try {
                const startTime = performance.now();
                const testArray = new Array(1000000).fill(0);
                for (let i = 0; i < testArray.length; i++) {
                    testArray[i] = Math.random();
                }
                const endTime = performance.now();
                const memoryTime = endTime - startTime;
                
                if (memoryTime < 50) score += 20;
                else if (memoryTime < 200) score += 10;
                else score -= 10;
            } catch (error) {
                score -= 20;
                info += ' (–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞)';
            }

            score = Math.max(0, Math.min(100, score));

            const progressBar = document.getElementById('ramProgress');
            progressBar.style.width = score + '%';
            
            if (score >= 70) {
                progressBar.className = 'progress-fill';
                document.getElementById('ramTest').innerHTML = `‚úÖ ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else if (score >= 40) {
                progressBar.className = 'progress-fill warning';
                document.getElementById('ramTest').innerHTML = `‚ö†Ô∏è ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            } else {
                progressBar.className = 'progress-fill bad';
                document.getElementById('ramTest').innerHTML = `‚ùå ${info}<br>–û—Ü–µ–Ω–∫–∞: ${score}/100`;
            }

            testResults.ram = { score, info };
            updateRecommendation();
        }

        function updateRecommendation() {
            if (!testResults.gpu.score || !testResults.cpu.score || !testResults.ram.score) {
                return;
            }

            const avgScore = (testResults.gpu.score + testResults.cpu.score + testResults.ram.score) / 3;
            let mode = 'auto';
            let description = '';
            let color = '#28a745';

            if (avgScore >= 80) {
                mode = 'high';
                description = '–í–∞—à –ü–ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–π –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞—á–µ—Å—Ç–≤–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–∂–∏–º "High".';
                color = '#28a745';
            } else if (avgScore >= 60) {
                mode = 'medium';
                description = '–í–∞—à –ü–ö –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–∂–∏–º "Medium".';
                color = '#ffc107';
            } else {
                mode = 'low';
                description = '–í–∞—à –ü–ö —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–∂–∏–º "Low".';
                color = '#dc3545';
            }

            const recommendation = document.getElementById('recommendation');
            recommendation.style.borderColor = color;
            recommendation.innerHTML = `
                <h4 style="color: ${color}">üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–∂–∏–º: ${mode.toUpperCase()}</h4>
                <p>${description}</p>
                <p><strong>–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞:</strong> ${Math.round(avgScore)}/100</p>
                <p><strong>GPU:</strong> ${testResults.gpu.score}/100</p>
                <p><strong>CPU:</strong> ${testResults.cpu.score}/100</p>
                <p><strong>RAM:</strong> ${testResults.ram.score}/100</p>
            `;
        }

        function runFullTest() {
            document.getElementById('gpuTest').innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GPU...';
            document.getElementById('cpuTest').innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CPU...';
            document.getElementById('ramTest').innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAM...';
            document.getElementById('recommendation').innerHTML = '<h4>‚è≥ –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã...</h4><p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.</p>';
            
            setTimeout(() => {
                runSystemInfo();
                runGPUTest();
                runCPUTest();
                runRAMTest();
            }, 100);
        }

        function openPerformancePanel() {
            window.open('performance-panel.html', '_blank');
        }
    </script>
</body>
</html> 